{% extends 'base.html' %}

{% block title %}الرئيسية{% endblock %}

{% block extra_css %}
<style>
  /* بطاقة المحتوى الرئيسية */
  .dashboard-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px,1fr));
    gap: 1.5rem;
    margin-top: 2rem;
  }
  .dashboard-card {
    background: #fff;
    padding: 1.5rem;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    text-align: center;
    transition: transform .2s, box-shadow .2s;
  }
  .dashboard-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
  }
  .dashboard-card h3 {
    margin-bottom: 1rem;
    font-size: 1.2rem;
    color: #333;
  }
  .dashboard-card a.btn {
    display: inline-block;
    padding: .6rem 1.2rem;
    background: #667eea;
    color: #fff;
    border-radius: 4px;
    text-decoration: none;
    font-weight: 500;
    transition: background .2s;
  }
  .dashboard-card a.btn:hover {
    background: #5563c1;
  }
  /* قسم آخر 5 مراجعات */
  .recent-reviews {
    margin-top: 2.5rem;
    background: #fff;
    border-radius: 8px;
    padding: 1.5rem;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }
  .recent-reviews h2 {
    margin-bottom: 1rem;
    font-size: 1.3rem;
    color: #333;
  }
  .recent-reviews ul {
    list-style: none;
    padding: 0;
  }
  .recent-reviews li {
    padding: .5rem 0;
    border-bottom: 1px solid #eee;
    color: #555;
  }
  .recent-reviews li:last-child {
    border-bottom: none;
  }
  .recent-reviews li span {
    font-weight: 600;
  }
</style>
{% endblock %}

{% block content %}
  <h1>مرحباً، {{ user.username }}!</h1>

  <div class="dashboard-cards">
    <div class="dashboard-card">
      <h3>إدارة المنتجات</h3>
      <a href="{% url 'admin_dashboard:product_list' %}" class="btn">ادارة المنتجات</a>
    </div>
    <div class="dashboard-card">
      <h3>مراجعات بانتظار الموافقة</h3>
      <a href="{% url 'admin_dashboard:pending_reviews' %}" class="btn">عرض المراجعات</a>
    </div>
    <div class="dashboard-card">
      <h3>إحصائيات المنتجات</h3>
      <a href="{% url 'admin_dashboard:product_stats' %}" class="btn">عرض الإحصائيات</a>
    </div>
    <div class="dashboard-card">
      <h3>التنبيهات</h3>
      <a href="{% url 'admin_dashboard:notifications' %}" class="btn">
        التنبيهات{% if unread_notifs %} ({{ unread_notifs }}){% endif %}
      </a>
    </div>
  </div>

  <div class="recent-reviews">
    <h2>آخر 5 مراجعات معتمدة</h2>
    <ul>
      {% for r in recent_reviews %}
        <li>
          <span>{{ r.user.username }}</span> على 
          <em>"{{ r.product.name }}"</em> — {{ r.rating }}⭐
        </li>
      {% empty %}
        <li>لا توجد مراجعات حتى الآن.</li>
      {% endfor %}
    </ul>
  </div>
{% endblock %}
